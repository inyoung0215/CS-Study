# í”„ë¡œì„¸ìŠ¤ ì£¼ì†Œ ê³µê°„(Process Address Space)

í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´ í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ë˜ê³  ë©”ëª¨ë¦¬ì— 'í”„ë¡œì„¸ìŠ¤ ì£¼ì†Œ ê³µê°„'ì´ í• ë‹¹(ìƒì„±) ëœë‹¤.

ì´ë ‡ê²Œ í• ë‹¹ ëœ processë¥¼ CPUê°€ ì‹¤í–‰ì‹œí‚¤ê²Œ ëœë‹¤.

![image](https://github.com/inyoung0215/CS-Study/assets/65496092/b2905bb8-3b84-4412-99d7-6f33a033b7c9)

# ì£¼ì†Œ ê³µê°„ êµ¬ì„± ìš”ì†Œ 
![image](https://github.com/inyoung0215/CS-Study/assets/65496092/11371d66-15b3-4179-a262-dca5b89a5e07)

## Code(Text) ì˜ì—­
- í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ìˆ˜ ìˆë„ë¡ CPUê°€ í•´ì„ ê°€ëŠ¥í•œ **ê¸°ê³„ì–´ ì½”ë“œ** ê°€ ì €ì¥ë˜ì–´ ìˆëŠ” ê³µê°„
- ì»´íŒŒì¼ ì‹œì— í¬ê¸°ê°€ ê²°ì •ëœë‹¤.
- í”„ë¡œê·¸ë¨ì˜ ì½”ë“œëŠ” ìˆ˜ì •ë˜ë©´ ì•ˆë˜ë¯€ë¡œ, Read-Only ë¡œ ì§€ì •ë˜ì–´ìˆë‹¤.
- ê°™ì€ í”„ë¡œê·¸ë¨ìœ¼ë¡œ ì‹¤í–‰ëœ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ëŠ” ë™ì¼í•œ ì½”ë“œë¥¼ ê°€ì§„ë‹¤.
- ë™ì¼í•œ ë‚´ìš©ì„ ì¤‘ë³µ í• ë‹¹í•˜ì§€ ì•Šê³  í•˜ë‚˜ì˜ ê³µê°„ìœ¼ë¡œ êµ¬ì„±í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤.

## Data ì˜ì—­
- ì´ˆê¸°ê°’ì´ ìˆëŠ” ì „ì—­/static(ì •ì ) ë³€ìˆ˜, ì´ˆê¸°í™”ëœ ìƒìˆ˜ ë“±ì´ ì €ì¥ë˜ëŠ” ê³µê°„ì´ë‹¤.
- ì „ì—­/static ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•œ ì½”ë“œëŠ” ì»´íŒŒì¼ í›„ Data ì˜ì—­ì˜ ì£¼ì†Œê°’ì„ ê°€ë¦¬í‚¨ë‹¤.
- í•œ í”„ë¡œì„¸ìŠ¤ ë‚´ ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ê³µí†µìœ¼ë¡œ Data ì˜ì—­ì„ ê³µìœ í•œë‹¤.
- ì¤‘ë³µëœ ë‚´ìš©ì„ ì—¬ëŸ¬ ë²ˆ í• ë‹¹í•˜ì§€ ì•Šê³  í•˜ë‚˜ì˜ ê³µê°„ìœ¼ë¡œ êµ¬ì„±í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì ˆì•½í•  ìˆ˜ ìˆë‹¤.
- ì‹¤í–‰ ì¤‘ì— ë³€ìˆ˜ê°€ ìˆ˜ì •ë  ìˆ˜ ìˆê¸°ì— Read-Write ë¡œ ì§€ì •ë˜ì–´ìˆë‹¤.
- í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹œ ìƒì„±ë˜ê³ , í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹œ ì†Œë©¸ëœë‹¤.

## BSS(Block Stated Symbol) ì˜ì—­
- ì´ˆê¸°ê°’ì´ ì—†ëŠ” ì „ì—­/static(ì •ì ) ë³€ìˆ˜ê°€ ì €ì¥ë˜ëŠ” ê³µê°„ì´ë‹¤.
- BSS ì˜ì—­ì€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ ë³€ìˆ˜ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ê²ƒì´ë©°, í•´ë‹¹ ë³€ìˆ˜ë“¤ì€ 0 ë˜ëŠ” NULL ê°’ìœ¼ë¡œ ì´ˆê¸°í™”ëœë‹¤.
- ì‹¤í–‰ ì¤‘ì— ë³€ìˆ˜ê°€ ìˆ˜ì •ë  ìˆ˜ ìˆê¸°ì— Read-Write ë¡œ ì§€ì •ë˜ì–´ìˆë‹¤.
- í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹œ ìƒì„±ë˜ê³ , í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹œ ì†Œë©¸ëœë‹¤.

## Stack ì˜ì—­
- í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ë§ˆì¹˜ê³  ë³µê·€í•  ì£¼ì†Œ, ë°ì´í„°(ì§€ì—­ ë³€ìˆ˜, ë§¤ê°œ ë³€ìˆ˜, ë°˜í™˜ê°’)ë¥¼ ì„ì‹œë¡œ ì €ì¥í•˜ëŠ” ê³µê°„ì´ë‹¤.
- ê° í•¨ìˆ˜ëŠ” LIFO êµ¬ì¡°ë¡œ ì‹¤í–‰ëœë‹¤.
- ì»´íŒŒì¼ ì‹œ í¬ê¸°ê°€ ê²°ì •ëœë‹¤.
- ì¬ê·€ í•¨ìˆ˜ê°€ ë„ˆë¬´ ê¹Šê²Œ í˜¸ì¶œë˜ê±°ë‚˜(í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ì§€ ì•Šê³  ê³„ì†í•´ì„œ ìŒ“ê±°ë‚˜) ì§€ì—­ë³€ìˆ˜ê°€ ë§ì•„ì§€ë©´ Stack Overflowê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
- ë©”ëª¨ë¦¬ì˜ ë†’ì€ ì£¼ì†Œì—ì„œ ë‚®ì€ ì£¼ì†Œì˜ ë°©í–¥ìœ¼ë¡œ í• ë‹¹ëœë‹¤.
- ì‹¤í–‰ ì¤‘ì— ë³€ìˆ˜ê°€ ìˆ˜ì •ë  ìˆ˜ ìˆê¸°ì— Read-Write ë¡œ ì§€ì •ë˜ì–´ìˆë‹¤.
- í•¨ìˆ˜ì˜ í˜¸ì¶œê³¼ í•¨ê»˜ í• ë‹¹ë˜ê³ , í•¨ìˆ˜ í˜¸ì¶œ ì™„ë£Œ ì‹œ ì†Œë©¸ëœë‹¤.

## Heap ì˜ì—­
- ë™ì  í• ë‹¹(malloc(), new ë“±)ì„ ìœ„í•œ ë©”ëª¨ë¦¬ ì˜ì—­ì´ë‹¤.
- í”„ë¡œê·¸ë˜ë¨¸ê°€ User modeì—ì„œ ì§ì ‘ ì œì–´í•  ìˆ˜ ìˆëŠ” ì˜ì—­ì´ë‹¤.
- ëŸ°íƒ€ì„ì— í¬ê¸°ê°€ ì •í•´ì§„ë‹¤.
- ë©”ëª¨ë¦¬ì˜ ë‚®ì€ ì£¼ì†Œì—ì„œ ë†’ì€ ì£¼ì†Œì˜ ë°©í–¥ìœ¼ë¡œ í• ë‹¹ëœë‹¤.
- ì£¼ë¡œ ì°¸ì¡°í˜• ë°ì´í„°(ex. ê°ì²´, í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤) ë“±ì˜ ë°ì´í„°ê°€ í• ë‹¹ëœë‹¤.

ğŸ’¡ ì°¸ê³  

Heapê³¼ Stackì€ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ì—ì„œ ê°™ì€ ê³µê°„ì„ ê³µìœ í•˜ë©°, ì„œë¡œ ë‹¤ë¥¸ ë°©í–¥ìœ¼ë¡œ í™•ì¥ëœë‹¤. 

ì¼ë°˜ì ìœ¼ë¡œ Heapì€ ìƒìœ„ ì£¼ì†Œì—ì„œ ì•„ë˜ë¡œ í™•ì¥ë˜ê³ , Stackì€ í•˜ìœ„ ì£¼ì†Œì—ì„œ ìœ„ë¡œ í™•ì¥ëœë‹¤.

ì´ë ‡ê²Œ ì„œë¡œ ë‹¤ë¥¸ ë°©í–¥ìœ¼ë¡œ í™•ì¥ë˜ëŠ” êµ¬ì¡° ë•Œë¬¸ì— Heap ì˜ì—­ê³¼ Stack ì˜ì—­ì´ ì„œë¡œ ì¹¨ë²”í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŸ¬í•œ ê²½ìš°ë¥¼ ê°ê° Heap Overflowì™€ Stack Overflowë¼ê³  ë¶€ë¥¸ë‹¤.

# +) ìŠ¤ë ˆë“œ ì£¼ì†Œ ê³µê°„
![image](https://github.com/inyoung0215/CS-Study/assets/65496092/c5095f87-6e76-463e-8ee5-e2f843e37f09)
- ë©€í‹° ìŠ¤ë ˆë“œ ìƒí™©ì—ì„œ ê°™ì€ í”„ë¡œì„¸ìŠ¤ ë‚´ì˜ ëª¨ë“  ìŠ¤ë ˆë“œëŠ” Code, Data, Heap ì˜ì—­ì„ ê³µìœ í•œë‹¤.
- Stack ì˜ì—­ì€ ê³µìœ í•˜ì§€ ì•Šê³  ìŠ¤ë ˆë“œë³„ë¡œ í• ë‹¹ë°›ëŠ”ë‹¤.
- ìì›ì„ ê³µìœ í•˜ê¸°ì— ë™ê¸°í™” ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

# âœï¸ ê´€ë ¨ ì§ˆë¬¸
## Q1. ì™œ Code ë¶€ë¶„ì„ ë”°ë¡œ ë‘ì—ˆë‚˜? (Why OS separates code segment?)
Programì˜ CodeëŠ” Programì´ ë§Œë“¤ì–´ì§€ê³ (ì»´íŒŒì¼ë˜ê³ ) ë‚˜ì„œëŠ” ë°”ë€” ì¼ì´ ì „í˜€ ì—†ê¸° ë•Œë¬¸ì— ì½ê¸°ë§Œ ê°€ëŠ¥í•œ Read Only ë¶€ë¶„ì…ë‹ˆë‹¤. 

ê°™ì€ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œì¼œ ì—¬ëŸ¬ Prcessê°€ ì‹¤í–‰ë˜ë”ë¼ë„ ê°™ì€ í”„ë¡œê·¸ë¨ì´ë¼ë©´ Code ë¶€ë¶„ì€ ë‹¤ ë˜‘ê°™ì€ ë‚´ìš©ì„ ê°€ì§€ê³  ìˆê²Œ ë©ë‹ˆë‹¤. 

ë”°ë¼ì„œ ê°™ì€ Programì˜ Processì¼ ê²½ìš° Code ë¶€ë¶„ì„ ê³µìœ (Share)í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ëŠ” ëª©ì ì…ë‹ˆë‹¤.

## Q2. ì™œ Stack ë¶€ë¶„ê³¼ Data ë¶€ë¶„ì„ ë‚˜ëˆ„ì—ˆë‚˜? (Why Os separates stack from data segment?)
Stackê³¼ Data ì˜ì—­ì˜ ë¶„ë¦¬ëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬, í•¨ìˆ˜ í˜¸ì¶œ ê´€ë¦¬, ë³´ì•ˆ, ì•ˆì •ì„± ë“± ë‹¤ì–‘í•œ ì¸¡ë©´ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤.

Stack ì˜ì—­ì€ í•¨ìˆ˜ í˜¸ì¶œê³¼ ë¡œì»¬ ë³€ìˆ˜ ê´€ë¦¬ë¥¼ ìœ„í•œ ê³µê°„ìœ¼ë¡œ, ê° í•¨ìˆ˜ì˜ ì‹¤í–‰ íë¦„ì„ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. 

ì´ëŠ” ìŠ¤ë ˆë“œì™€ ê°™ì€ ë³‘ë ¬ ì‹¤í–‰ ë‹¨ìœ„ì—ì„œ ê°ê°ì˜ ìŠ¤íƒì„ ê°–ê²Œ í•˜ì—¬ í•¨ìˆ˜ í˜¸ì¶œì„ ê²©ë¦¬ì‹œí‚¤ëŠ” ë° ë„ì›€ì„ ì¤ë‹ˆë‹¤.

Data ì˜ì—­ì€ ì „ì—­ ë³€ìˆ˜ì™€ ì •ì  ë³€ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ê³µê°„ìœ¼ë¡œ, ì´ëŸ¬í•œ ë³€ìˆ˜ë“¤ì€ í”„ë¡œê·¸ë¨ ì „ì²´ì—ì„œ ê³µìœ ë©ë‹ˆë‹¤. 

ë”°ë¼ì„œ ìŠ¤ë ˆë“œ ê°„ì— Data ì˜ì—­ì„ ê³µìœ í•¨ìœ¼ë¡œì¨ ë©”ëª¨ë¦¬ íš¨ìœ¨ì„ ë†’ì´ê³  ì¤‘ë³µëœ ë‚´ìš©ì„ ê³µìœ í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ì ˆì•½í•©ë‹ˆë‹¤.

ì´ë ‡ê²Œ Stackê³¼ Data ì˜ì—­ì„ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•¨ìœ¼ë¡œì¨ í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì œì–´í•˜ê³  ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ ê°„ì†Œí™”í•  ìˆ˜ ìˆìœ¼ë©°, ë™ì‹œì— ìŠ¤ë ˆë“œì™€ ê°™ì€ ë³‘ë ¬ ì‹¤í–‰ í™˜ê²½ì—ì„œ ì•ˆì „í•œ ì‹¤í–‰ì„ ë³´ì¥í•©ë‹ˆë‹¤.

ğŸ’¡ í•¨ìˆ˜ì˜ ì‹¤í–‰ê³¼ Stack êµ¬ì¡°
![image](https://github.com/inyoung0215/CS-Study/assets/65496092/15e88377-8b33-4239-a3cd-946667782099)
![image](https://github.com/inyoung0215/CS-Study/assets/65496092/f5ef6c8e-be02-4b76-be63-0666fd0791a5)

## Q3. Stackê³¼ Heap ê³µê°„ì— ëŒ€í•´, ì ‘ê·¼ ì†ë„ê°€ ë” ë¹ ë¥¸ ê³µê°„ì€ ì–´ë””ì¼ê¹Œìš”?
ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ë¡œ Stack ê³µê°„ì´ ë” ë¹ ë¦…ë‹ˆë‹¤. 

- í• ë‹¹ ë° í•´ì œ ì†ë„
  - ìŠ¤íƒì—ì„œ í• ë‹¹ì˜ ì˜ë¯¸ëŠ” ì´ë¯¸ ìƒì„±ë˜ì–´ ìˆëŠ” ìŠ¤íƒì— ëŒ€í•´ í¬ì¸í„°ì˜ ìœ„ì¹˜ë§Œ ë°”ê¿”ì£¼ëŠ” ë‹¨ìˆœí•œ CPU Instruction(ë§ì…ˆê³¼ ëº„ì…ˆ ì—°ì‚°, ì¼ë°˜ì ìœ¼ë¡œ ë‹¨ì¼ Instruction)ì´ë‹¤. 
  - ë°˜ë©´ í™ì—ì„œì˜ í• ë‹¹ì€ ìš”ì²­ëœ chunkì˜ í¬ê¸°, í˜„ì¬ ë©”ëª¨ë¦¬ì˜ fragmentation ìƒí™© ë“± ë‹¤ì–‘í•œ ìš”ì†Œë¥¼ ê³ ë ¤í•˜ê¸° ë•Œë¬¸ì— ë” ë§ì€ CPU Instructionì´ í•„ìš”í•˜ë‹¤.

- ë©”ëª¨ë¦¬ ì§€ì—­ì„±
  - ìŠ¤íƒì€ í•¨ìˆ˜ í˜¸ì¶œê³¼ ë¡œì»¬ ë³€ìˆ˜ ê´€ë¦¬ë¥¼ ìœ„í•œ ì˜ì—­ìœ¼ë¡œ ì‚¬ìš©ë˜ë©°, ìŠ¤íƒ í”„ë ˆì„ì€ ì£¼ë¡œ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ í•¨ìˆ˜ì™€ ê´€ë ¨ëœ ë°ì´í„°ë§Œì„ í¬í•¨í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ì§€ì—­ì„±(locality)ì´ ë†’ë‹¤. 
  - ì´ë¡œ ì¸í•´ ë°ì´í„°ê°€ CPU ìºì‹œë¥¼ í•˜ê¸°ì— ë” ì˜ ì–´ìš¸ë ¤ ë¹ ë¥¸ ë©”ëª¨ë¦¬ ì•¡ì„¸ìŠ¤ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

- ê°„ë‹¨í•œ êµ¬ì¡°
  - ìŠ¤íƒì€ LIFO êµ¬ì¡°ë¥¼ ê°€ì§€ë©°, ê° í•¨ìˆ˜ì˜ í˜¸ì¶œ ë° ë°˜í™˜ ì •ë³´ë¥¼ ìŠ¤íƒì— ë‹¨ìˆœí•˜ê²Œ ìŒ“ê³  ì œê±°í•©ë‹ˆë‹¤. 
  - ì´ëŸ¬í•œ êµ¬ì¡°ë¡œ ì¸í•´ í•¨ìˆ˜ í˜¸ì¶œ ë° ë°˜í™˜ì´ ê°„ë‹¨í•˜ê²Œ ì´ë£¨ì–´ì§€ë©°, ë©”ëª¨ë¦¬ ê´€ë¦¬ê°€ íš¨ìœ¨ì ì…ë‹ˆë‹¤.

>Reference <br></br>
>[í”„ë¡œì„¸ìŠ¤(Process)ì˜ ì£¼ì†Œ ê³µê°„(Address Space)](https://whereisusb.tistory.com/10) <br></br>
>[Process Address Space(í”„ë¡œì„¸ìŠ¤ ì£¼ì†Œ ê³µê°„)](https://hojunking.tistory.com/51) <br></br>
>[[ìš´ì˜ì²´ì œ] í”„ë¡œì„¸ìŠ¤ ì£¼ì†Œê³µê°„](https://velog.io/@klloo/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4-%EC%A3%BC%EC%86%8C%EA%B3%B5%EA%B0%84) <br></br>